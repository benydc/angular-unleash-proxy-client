import { APP_INITIALIZER, inject, InjectionToken, makeEnvironmentProviders } from '@angular/core';
import { UnleashService } from './unleash.service';
import { take, tap } from 'rxjs/operators';
export const UNLEASH_CONFIG = new InjectionToken('Unleash config');
export function provideUnleashProxy(config) {
    return makeEnvironmentProviders([
        { provide: UNLEASH_CONFIG, useValue: config },
        {
            provide: APP_INITIALIZER,
            useFactory: () => {
                const unleashService = inject(UnleashService);
                return () => unleashService.initialized$.pipe(take(1), tap(() => unleashService.unleash.start()));
            },
            multi: true,
        },
    ]);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5sZWFzaC5pbml0aWFsaXplci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL2FuZ3VsYXItdW5sZWFzaC1wcm94eS1jbGllbnQvc3JjL2xpYi91bmxlYXNoLmluaXRpYWxpemVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxlQUFlLEVBQXdCLE1BQU0sRUFBRSxjQUFjLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDeEgsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHM0MsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFHLElBQUksY0FBYyxDQUFnQixnQkFBZ0IsQ0FBQyxDQUFDO0FBRWxGLE1BQU0sVUFBVSxtQkFBbUIsQ0FDakMsTUFBcUI7SUFFckIsT0FBTyx3QkFBd0IsQ0FBQztRQUM5QixFQUFFLE9BQU8sRUFBRSxjQUFjLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRTtRQUM3QztZQUNFLE9BQU8sRUFBRSxlQUFlO1lBQ3hCLFVBQVUsRUFBRSxHQUFHLEVBQUU7Z0JBQ2YsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDO2dCQUM5QyxPQUFPLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUMzQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQ1AsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FDMUMsQ0FBQztZQUNKLENBQUM7WUFDRCxLQUFLLEVBQUUsSUFBSTtTQUNaO0tBQ0YsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFQUF9JTklUSUFMSVpFUiwgRW52aXJvbm1lbnRQcm92aWRlcnMsIGluamVjdCwgSW5qZWN0aW9uVG9rZW4sIG1ha2VFbnZpcm9ubWVudFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVW5sZWFzaFNlcnZpY2UgfSBmcm9tICcuL3VubGVhc2guc2VydmljZSc7XG5pbXBvcnQgeyB0YWtlLCB0YXAgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQgeyBJQ29uZmlnIGFzIFVubGVhc2hDb25maWcgfSBmcm9tICd1bmxlYXNoLXByb3h5LWNsaWVudCc7XG5cbmV4cG9ydCBjb25zdCBVTkxFQVNIX0NPTkZJRyA9IG5ldyBJbmplY3Rpb25Ub2tlbjxVbmxlYXNoQ29uZmlnPignVW5sZWFzaCBjb25maWcnKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHByb3ZpZGVVbmxlYXNoUHJveHkoXG4gIGNvbmZpZzogVW5sZWFzaENvbmZpZyxcbik6IEVudmlyb25tZW50UHJvdmlkZXJzIHtcbiAgcmV0dXJuIG1ha2VFbnZpcm9ubWVudFByb3ZpZGVycyhbXG4gICAgeyBwcm92aWRlOiBVTkxFQVNIX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9LFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IEFQUF9JTklUSUFMSVpFUixcbiAgICAgIHVzZUZhY3Rvcnk6ICgpID0+IHtcbiAgICAgICAgY29uc3QgdW5sZWFzaFNlcnZpY2UgPSBpbmplY3QoVW5sZWFzaFNlcnZpY2UpO1xuICAgICAgICByZXR1cm4gKCkgPT4gdW5sZWFzaFNlcnZpY2UuaW5pdGlhbGl6ZWQkLnBpcGUoXG4gICAgICAgICAgdGFrZSgxKSxcbiAgICAgICAgICB0YXAoKCkgPT4gdW5sZWFzaFNlcnZpY2UudW5sZWFzaC5zdGFydCgpKVxuICAgICAgICApO1xuICAgICAgfSxcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgIH0sXG4gIF0pO1xufVxuIl19